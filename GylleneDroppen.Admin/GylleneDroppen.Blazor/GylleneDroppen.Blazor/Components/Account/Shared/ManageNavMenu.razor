@using GylleneDroppen.Core.Entities
@using Microsoft.AspNetCore.Identity

@inject SignInManager<ApplicationUser> SignInManager

<div style="display: flex; flex-direction: column; gap: 0.5rem;">
    <NavLink href="konto/hantera" Match="NavLinkMatch.All" 
             style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; color: #2B1810; text-decoration: none; border-radius: 0.375rem; font-family: Georgia, serif; font-weight: 500; transition: all 0.2s ease;"
             onmouseover="this.style.background='#DAD3C7'; this.style.color='#8B4513'"
             onmouseout="if(!this.classList.contains('active')) { this.style.background='transparent'; this.style.color='#2B1810' }"
             ActiveClass="active-manage-link">
        <span>👤</span> Profil
    </NavLink>
    <NavLink href="konto/hantera/epost" 
             style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; color: #2B1810; text-decoration: none; border-radius: 0.375rem; font-family: Georgia, serif; font-weight: 500; transition: all 0.2s ease;"
             onmouseover="this.style.background='#DAD3C7'; this.style.color='#8B4513'"
             onmouseout="if(!this.classList.contains('active')) { this.style.background='transparent'; this.style.color='#2B1810' }"
             ActiveClass="active-manage-link">
        <span>📧</span> E-post
    </NavLink>
    <NavLink href="konto/hantera/byt-losenord" 
             style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; color: #2B1810; text-decoration: none; border-radius: 0.375rem; font-family: Georgia, serif; font-weight: 500; transition: all 0.2s ease;"
             onmouseover="this.style.background='#DAD3C7'; this.style.color='#8B4513'"
             onmouseout="if(!this.classList.contains('active')) { this.style.background='transparent'; this.style.color='#2B1810' }"
             ActiveClass="active-manage-link">
        <span>🔐</span> Lösenord
    </NavLink>
    @if (hasExternalLogins)
    {
        <NavLink href="konto/hantera/externa-inloggningar" 
                 style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; color: #2B1810; text-decoration: none; border-radius: 0.375rem; font-family: Georgia, serif; font-weight: 500; transition: all 0.2s ease;"
                 onmouseover="this.style.background='#DAD3C7'; this.style.color='#8B4513'"
                 onmouseout="if(!this.classList.contains('active')) { this.style.background='transparent'; this.style.color='#2B1810' }"
                 ActiveClass="active-manage-link">
            <span>🔗</span> Externa inloggningar
        </NavLink>
    }
    <NavLink href="konto/hantera/personuppgifter" 
             style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; color: #2B1810; text-decoration: none; border-radius: 0.375rem; font-family: Georgia, serif; font-weight: 500; transition: all 0.2s ease;"
             onmouseover="this.style.background='#DAD3C7'; this.style.color='#8B4513'"
             onmouseout="if(!this.classList.contains('active')) { this.style.background='transparent'; this.style.color='#2B1810' }"
             ActiveClass="active-manage-link">
        <span>📄</span> Personuppgifter
    </NavLink>
</div>

<style>
    .active-manage-link {
        background: #8B4513 !important;
        color: white !important;
    }
</style>

@code {
    private bool hasExternalLogins;

    protected override async Task OnInitializedAsync()
    {
        hasExternalLogins = (await SignInManager.GetExternalAuthenticationSchemesAsync()).Any();
    }

}